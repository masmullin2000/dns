<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DNS Manager{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script>
        //
        // Theme toggle functionality
        (function() {
            // Check for saved theme preference or default to light mode
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);

            // Update button text based on current theme
            function updateThemeButton() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const button = document.getElementById('theme-toggle');
                if (button) {
                    // Check if mobile view (768px or less)
                    const isMobile = window.innerWidth <= 768;
                    if (isMobile) {
                        button.textContent = currentTheme === 'dark' ? '☀️\nLight\nMode' : '🌙\nDark\nMode';
                    } else {
                        button.textContent = currentTheme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';
                    }
                }
            }

            // Update button on window resize
            window.addEventListener('resize', updateThemeButton);

            // Toggle theme function
            window.toggleTheme = function() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';

                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeButton();
            };

            // Update button text when DOM is ready
            document.addEventListener('DOMContentLoaded', updateThemeButton);
        })();

        // Restart button responsive text
        (function() {
            function updateRestartButton() {
                const button = document.getElementById('restart-button');
                if (button) {
                    const isMobile = window.innerWidth <= 768;
                    if (isMobile) {
                        button.textContent = '🔄\nRestart\nDNS';
                    } else {
                        button.textContent = '🔄 Restart DNS';
                    }
                }
            }

            window.addEventListener('resize', updateRestartButton);
            document.addEventListener('DOMContentLoaded', updateRestartButton);
        })();
    </script>
</head>
<body>
    <div class="main-container">
        <header>
            <div class="header-left">
                <div class="header-table">
                    <div class="header-content">
                        <h1><a href="/">DNS Configuration Manager</a></h1>
                        <nav>
                            <a href="/edit/options">Options</a>
                            <a href="/edit/local_network">Network</a>
                            <a href="/edit/local_domains">Domains</a>
                            <a href="/edit/nameservers">Nameservers</a>
                            <a href="/edit/dot">DoT</a>
                        </nav>
                    </div>
                    <div class="theme-toggle-wrapper">
                        <button
                            id="restart-button"
                            hx-post="/restart"
                            hx-confirm="Are you sure you want to restart the DNS server? This will reload the configuration."
                            hx-swap="none"
                            class="restart-button"
                            title="Restart DNS Server">
                            🔄 Restart DNS
                        </button>
                        <button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()">🌙 Dark Mode</button>
                    </div>
                </div>
            </div>
        </header>

        <div class="container">
            <div class="content">
                {% block content %}{% endblock %}
            </div>
        </div>
    </div>
</body>
</html>
